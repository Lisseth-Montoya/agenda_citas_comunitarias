{% extends 'layout/base.html' %}

{% block title %}Gestión de Pacientes{% endblock %}

{% block css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pacientes.css') }}?v=1">
{% endblock %}

{% block content %}

<!-- Encabezado -->
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-semibold text-primary">
        <i class="bi bi-clipboard-plus"></i> Registrar / Editar Pacientes
    </h2>
</div>

<div class="form-container">

    <!-- ALERTAS -->
    <div id="alertContainer"></div>

    <!-- FORMULARIO -->
    <div class="card mb-4 shadow-sm">
        <div class="card-body">
            <form id="pacienteForm">
                <input type="hidden" id="id_paciente">

                <div class="row g-3">

                    <div class="col-12 col-md-4">
                        <label for="nombre">Nombre:</label>
                        <input type="text" id="nombre" class="form-control" required>
                    </div>

                    <div class="col-12 col-md-4">
                        <label for="apellido">Apellido:</label>
                        <input type="text" id="apellido" class="form-control" required>
                    </div>

                    <div class="col-12 col-md-4">
                        <label for="dui">DUI:</label>
                        <input type="text" id="dui" class="form-control"
                            placeholder="00000000-0" maxlength="10"
                            pattern="^[0-9]{8}-[0-9]{1}$" required>
                    </div>

                    <div class="col-12 col-md-4">
                        <label for="fechaNacimiento">Fecha de nacimiento:</label>
                        <input type="date" id="fechaNacimiento" class="form-control" required>
                    </div>

                    <div class="col-12 col-md-4">
                        <label for="telefono">Teléfono:</label>
                        <input type="tel" id="telefono" class="form-control"
                            placeholder="0000-0000"
                            maxlength="9" pattern="^[0-9]{4}-[0-9]{4}$" required>
                    </div>

                    <div class="col-12 col-md-4">
                        <label for="correo">Correo:</label>
                        <input type="email" id="correo" class="form-control"
                            placeholder="ejemplo@correo.com" required>
                    </div>

                    <div class="col-12 col-md-4">
                        <label for="genero">Género:</label>
                        <select id="genero" class="form-select" required>
                            <option value="">Seleccione...</option>
                            <option value="M">Masculino</option>
                            <option value="F">Femenino</option>
                        </select>
                    </div>

                    <div class="col-12 col-md-4">
                        <label for="estado">Estado:</label>
                        <select id="estado" class="form-select" required>
                            <option value="Activo">Activo</option>
                            <option value="Inactivo">Inactivo</option>
                        </select>
                    </div>

                    <div class="col-12 col-md-4">
                        <label for="direccion">Dirección:</label>
                        <input type="text" id="direccion" class="form-control" required>
                    </div>

                    <div class="col-12 col-md-4">
                        <label for="observaciones">Observaciones:</label>
                        <textarea id="observaciones" class="form-control"
                            rows="3" required></textarea>
                    </div>

                </div>

                <!-- BOTONES -->
                <div class="form-buttons mt-3 text-end">
                    <button type="submit" class="btn btn-primary" id="btnGuardar">
                        <i class="bi bi-save"></i> Guardar
                    </button>

                    <button type="reset" class="btn btn-secondary" id="btnLimpiar">
                        <i class="bi bi-x-circle"></i> Limpiar
                    </button>
                </div>

            </form>
        </div>
    </div>
</div>

<!-- FILTROS -->
<div class="card mb-4 shadow-sm">
    <div class="card-header fw-semibold">Filtros de búsqueda</div>
    <div class="card-body">
        <form class="row g-3">
            <div class="col-md-4">
                <label for="inputFiltroNombreApellido" class="form-label">Nombre o apellido:</label>
                <input type="text" id="inputFiltroNombreApellido" class="form-control">
            </div>

            <div class="col-md-4">
                <label for="inputFiltroDui" class="form-label">DUI:</label>
                <input type="text" id="inputFiltroDui" class="form-control">
            </div>
        </form>
    </div>
</div>

<!-- TABLA -->
<div class="card shadow-sm">
    <div class="card-header fw-semibold">Listado de pacientes</div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-hover align-middle">
                <thead class="table-primary">
                    <tr>
                        <th>Nombre</th>
                        <th>Apellido</th>
                        <th>DUI</th>
                        <th>Fecha nac.</th>
                        <th>Teléfono</th>
                        <th>Correo</th>
                        <th>Género</th>
                        <th>Observaciones</th>
                        <th>Dirección</th>
                        <th>Estado</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody id="tablaPacientesBody"></tbody>
            </table>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/pacientes.js') }}"></script>
{% endblock %}
